{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12 page-logo"></div>
    </div>
</div>

<div class="col-12 col-md-5 order-md-first">
    <p class="text-muted mt-3 small text-left">

        <span class="small shop-breadcrumb"><a href="{% url 'products' %}">SHOP </a></span>
        <span class="small px-2">></span>
        <span class="small shop-breadcrumb text-uppercase">
            <a href="{% url 'products' %}?category={{ product.category.name }}">
                {{ product.category.display_name }}
            </a>
        </span>

        <span class="small px-2">></span>
        <span class="small shop-breadcrumb text-uppercase">
            <a href="{% url 'products' %}?variety={{ product.variety.name }}">
                {{ product.variety.display_name }}
            </a>
        </span>
    </p>
</div>

<div class="container h-100 pt-5">
    <div class="row">
        <div class="col-12 d-flex d-sm-none">
            <h2 class="font-weight-bold text-uppercase">{{ product.name }}</h2>
        </div>
        <div class="col-12 col-md-6 text-center">
            {% if product.image %}
            <img src="{{ product.image.url }}" class="card-img-top img-fluid product-image" alt="{{ product.name }}">
            {% else %}
            <img src="{{ MEDIA_URL }}no-image.png" class="card-img-top img-fluid product-image"
                alt="{{ product.name }}">
            {% endif %}
        </div>
        <div class="col-12 col-md-6">
            <div class="product-detail">
                <h2 class="font-weight-bold d-none d-sm-flex text-uppercase">{{ product.name }}</h2>
                <h4 class="font-weight-bold mb-0">Â£{{ product.price }}</h4>
                <h6 class="text-uppercase pt-2" id="category-link">
                    <a href="{% url 'products' %}?category={{ product.category.name }}">
                        {{ product.category.display_name }}
                    </a>
                </h6>
                <p><strong>Variety: </strong>{{ product.variety.display_name }}</p>
                {% if product.region %}
                <p><strong>Region: </strong>{{ product.region }}</p>
                {% endif %}
                {% if product.altitude %}
                <p><strong>Altitude: </strong>{{ product.altitude }}</p>
                {% endif %}
                {% if product.strength %}
                <p><strong>Strength: </strong>{{ product.strength }}/10</p>
                {% endif %}
                <p>{{ product.description }}</p>
                <p><strong>Size: </strong>{{ product.bag_size }}</p>
                <form class="form" action="{% url 'add_to_bag' product.id %}" method="POST">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="col-12">
                            <div class="form-group w-50">
                                <div class="input-group">
                                    <p class="mr-4"><strong>Quantity:</strong></p>
                                    <input class="form-control qty_input rounded-0" type="number" name="quantity"
                                        value="1" min="1" max="99" data-product_id="{{ product.id }}"
                                        id="id_qty_{{ product.id }}">
                                </div>
                            </div>
                        </div>

                        <div class="col-12">
                            <input type="submit" class="light-button rounded-0 text-uppercase mt-1" value="Add to Bag">
                        </div>
                        <input type="hidden" name="redirect_url" value="{{ request.path }}">
                    </div>
                </form>
                <a href="{% url 'products' %}">
                    <button class="dark-button text-uppercase">Keep Shopping</button>
                </a>
            </div>
        </div>
    </div>
</div>

{% endblock %}